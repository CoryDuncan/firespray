<!DOCTYPE html>
<html>
<head lang="en">
	<meta http-equiv="content-type" content="text/html; charset=UTF-8">
	<script src="../lib/d3.js"></script>
	<script src="../lib/render-slicer.js"></script>
	<script src="../src/core.js"></script>
	<script src="../src/default-config.js"></script>
	<script src="../src/util.js"></script>
	<script src="../src/hovering.js"></script>
	<script src="../src/templates.js"></script>
	<script src="../src/scales.js"></script>
	<script src="../src/axis-x.js"></script>
	<script src="../src/axis-y.js"></script>
	<script src="../src/stripes.js"></script>
	<script src="../src/brush.js"></script>
	<script src="../src/containers.js"></script>
	<script src="../src/geometries.js"></script>
	<style>
		body{
			height: 100%;
			overflow: hidden;
		}
	</style>
</head>
<body>

<div class="container chart1"></div>

<script>

/*
todo:
-1001 hardcoded
-pixel to zoom (dragging when zoomed should pan slower) hardcoded limits
-stripes
-zoom from mouse instead of center
 */

	var data = firespray.utils.generateData({pointCount: 200, lineCount: 5});

	var scrollAccum = 0;
	var mouseAccum = 0;

	var chart = firespray.chart()
		.setConfig({
			container: document.querySelector('.chart1'),
			width: 600,
			height: 400,
			theme: 'default',
			stripeWidthInSample: 1,
			geometryType: 'line'
		})
		.setData(data)
		.on('mouseDragMove', function(movementX){
			var data = chart.getDataExtent();

			mouseAccum += movementX;

			var zoom = -(10 * scrollAccum)/100000;
			var mult = 400 - zoom * 400 + 2;

			var newData = [];
			newData[0] = (data[0] - mult * mouseAccum) - 10 * scrollAccum;
			newData[1] = (data[1] - mult * mouseAccum) + 10 * scrollAccum;

			chart.setZoom(newData);
		})
		.on('mouseWheelScroll', function(scroll){
			var data = chart.getDataExtent();

			scrollAccum += scroll;

			var newData = [];
			newData[0] = (data[0] - 200 * mouseAccum) - 10 * scrollAccum;
			newData[1] = (data[1] - 200 * mouseAccum) + 10 * scrollAccum;

			if((newData[1] - newData[0]) >= 1001){
				chart.setZoom(newData);
			}
			else{
				scrollAccum -= scroll;
			}

		});

</script>
</body>
</html>